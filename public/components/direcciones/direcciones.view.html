<h1>Registro de Direcciones</h1>

<div>

  <div class="col-4 my-4">
  <form ng-submit="vm.registrarDireccion(vm.nuevaDireccion)">
      <div class="form-group">
          <label for="sltProvincia">Provincia</label>
          <select id="sltProvincia" class="form-control" name="sltProvincias" ng-change="vm.rellenarCantones(vm.nuevaDireccion.provincia._id)" ng-options="provincia as provincia.name for provincia in vm.provincias track by provincia._id" ng-model="vm.nuevaDireccion.provincia" required>
            <option value="">-- Seleccione una Provincia --</option>
          </select>
          <div ng-messages="formRegistroUsuarios.sltProvincias.$error" role="alert">
            <div ng-message="required">
              <small class="form-text text-muted">Este campo es requerido</small>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="sltCanton">Cantón</label>
          <select id="sltCanton" class="form-control" name="sltCantones" ng-change="vm.rellenarDistrito(vm.nuevaDireccion.canton._id)" ng-options="canton as canton.name for canton in vm.cantones track by canton._id" ng-model="vm.nuevaDireccion.canton" required>
            <option value="">-- Seleccione un Cantón --</option>
          </select>
          <div ng-messages="formRegistroUsuarios.sltCantones.$error" role="alert">
            <div ng-message="required">
              <small class="form-text text-muted">Este campo es requerido</small>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="sltDistrito">Distrito</label>
          <select id="sltDistrito" class="form-control" name="sltDistritos" ng-options="distrito as distrito.name for distrito in vm.distritos track by distrito._id" ng-model="vm.nuevaDireccion.distrito" required>
            <option value="">-- Seleccione un Distrito --</option>
          </select>
          <div ng-messages="formRegistroUsuarios.sltDistritos.$error" role="alert">
              <div ng-message="required">
                <small class="form-text text-muted">Este campo es requerido</small>
              </div>

      <button type="submit" class="btn btn-success">Registrar</button>
      
    </form>
  </div>

</div>

<div class="col-12">
  <table class="table">
    <thead>
        <tr>
          <th>Provincia</th>
          <th>Canton</th>
          <th>Distrito</th>
        </tr>
    </thead>
    <tbody>
      <tr ng-repeat="direccion in vm.listaDirecciones">
        <td>{{direccion.provincia.name}}</td>
        <td>{{direccion.canton.name}}</td>
        <td>{{direccion.distrito.name}}</td>
      </tr>
    </tbody>
  </table>
</div>
